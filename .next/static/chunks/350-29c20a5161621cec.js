"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{350:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(5155),l=a(2115),n=a(5695),i=a(9911),r=a(5317);let c=(0,a(3915).Wp)({apiKey:"AIzaSyDtYR9RCS8kiUp1pUOWMuxHKGBF701Yriw",authDomain:"ivino-app.firebaseapp.com",projectId:"ivino-app",storageBucket:"ivino-app.firebasestorage.app",messagingSenderId:"27430021409",appId:"1:27430021409:web:5dd494dff3faa3cce87660",measurementId:"G-14N8SXXVMC"}),o=(0,r.aU)(c),d=e=>{let{rating:t}=e,a=[],l=Math.floor(t);for(let e=0;e<l;e++)a.push((0,s.jsx)(i.gt3,{className:"text-yellow-400"},"full-".concat(e)));t%1>=.5&&a.push((0,s.jsx)(i.gVl,{className:"text-yellow-400"},"half"));let n=5-a.length;for(let e=0;e<n;e++)a.push((0,s.jsx)(i.wei,{className:"text-yellow-400"},"empty-".concat(e)));return(0,s.jsx)("div",{className:"flex gap-1",children:a})};function x(){let e=(0,n.useParams)(),t=(0,n.useSearchParams)(),a=(null==e?void 0:e.eventId)||(null==t?void 0:t.get("eventId"))||(null==t?void 0:t.get("id"))||"",{ranking:c,loading:x}=function(e){let[t,a]=(0,l.useState)(),[s,n]=(0,l.useState)(!0),i=(0,l.useCallback)(async()=>{if(e){n(!0);try{let t=(0,r.P)((0,r.rJ)(o,"wineRankings"),(0,r._M)("eventId","==",e)),s=(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));console.log(JSON.stringify(s),"DATA DATA DATA"),a(s)}catch(e){console.error("Erro ao buscar ranking:",e)}n(!1)}},[e]);return(0,l.useEffect)(()=>{i()},[e,i]),{ranking:t,loading:s,getRanking:i}}(a);console.log(c,"event  id");let{eventData:m,loading:h}=function(e){let[t,a]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{e&&(async()=>{n(!0);try{let t=(0,r.H9)(o,"events",e),s=await (0,r.x7)(t);s.exists()&&a(s.data())}catch(e){console.error("Erro ao buscar evento:",e)}n(!1)})()},[e]),{eventData:t,loading:s}}(a),[u,g]=(0,l.useState)(null),[p,j]=(0,l.useState)({totalWines:0,totalParticipants:0,averageRating:0});(0,l.useEffect)(()=>{if((null==c?void 0:c.length)===0)return void j({totalWines:0,totalParticipants:0,averageRating:0});try{let e=null==c?void 0:c.length,t=(null==c?void 0:c.reduce((e,t)=>e+(t.totalRatings||0),0))||0,a=t>0?(null==c?void 0:c.reduce((e,t)=>e+(t.rating||0)*(t.totalRatings||0),0))/t:0;j({totalWines:e,totalParticipants:t,averageRating:a})}catch(e){g(e),console.error("Erro ao calcular estat\xedsticas:",e)}},[0]);let v=(c||[]).slice(0,3),f=(c||[]).slice(3);return x&&h?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600 text-xl",children:"Carregando ranking..."})}):a?(0,s.jsxs)("main",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 w-full z-50 bg-[#0F0F1B] text-white p-4 flex justify-between items-center shadow-md",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"EnoLink"}),(0,s.jsxs)("div",{className:"text-sm text-right",children:[(0,s.jsx)("div",{className:"font-semibold",children:(null==m?void 0:m.name)||"Carregando..."}),(0,s.jsx)("div",{className:"text-gray-300",children:(null==m?void 0:m.location)||""})]}),(0,s.jsx)("button",{className:"bg-red-800 px-4 py-2 rounded text-sm hover:opacity-80",children:"Compartilhar"})]}),(0,s.jsx)("div",{className:"h-20"}),(0,s.jsxs)("section",{className:"text-center py-8 px-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Ranking Final"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os melhores vinhos avaliados pelos participantes do evento"})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-10 text-center mb-10 text-xl font-medium",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:p.totalWines}),(0,s.jsx)("br",{}),"Vinhos Avaliados"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:p.totalParticipants}),(0,s.jsx)("br",{}),"Total de Avalia\xe7\xf5es"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:p.averageRating.toFixed(1)}),(0,s.jsx)("br",{}),"Nota M\xe9dia"]})]}),(null==v?void 0:v.length)>0&&(0,s.jsx)("div",{className:"overflow-y-auto",children:(0,s.jsxs)("ul",{class:"space-y-2",children:[(null==v?void 0:v.length)>0&&(0,s.jsx)("section",{className:"flex justify-center gap-8 mb-12 px-4 flex-wrap",children:v.map((e,t)=>(0,s.jsxs)("div",{className:"text-center p-4 rounded-xl shadow-lg w-60 ".concat(0===t?"border-2 border-red-800":""),children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:0===t?(0,s.jsx)(i.Hu1,{className:"text-red-800 mx-auto"}):1===t?(0,s.jsx)(i.tz0,{className:"text-gray-400 mx-auto"}):(0,s.jsx)(i.tz0,{className:"text-orange-300 mx-auto"})}),e.image&&(0,s.jsx)("div",{className:"w-16 h-24 mx-auto mb-2 relative",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsx)("div",{className:"flex justify-center my-2",children:(0,s.jsx)(d,{rating:e.rating||0})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[e.totalRatings||0," avalia",1!=e.totalRatings?"\xf5es":"\xe7\xe3o"]}),(0,s.jsxs)("div",{className:"mt-2 text-white font-bold rounded-full px-4 py-1 w-fit mx-auto ".concat(0===t?"bg-red-800":1===t?"bg-gray-400":"bg-orange-300"),children:["#",t+1]})]},e.id))}),(null==f?void 0:f.length)>0&&(0,s.jsxs)("section",{className:"px-4 max-w-3xl mx-auto mb-16",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ranking Completo"}),f.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg mb-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[e.image&&(0,s.jsx)("div",{className:"w-12 h-16 flex-shrink-0",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold",children:["#",t+4," ",e.name]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.totalRatings||0," avalia\xe7\xe3o",1!==e.totalRatings?"\xf5es":""]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{rating:e.rating||0}),(0,s.jsx)("span",{className:"ml-2 text-black font-medium",children:(e.rating||0).toFixed(1)})]})]},e.id))]})]})}),(null==c?void 0:c.length)==0&&(0,s.jsxs)("section",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF77"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Ainda n\xe3o h\xe1 avalia\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os participantes ainda n\xe3o avaliaram os vinhos deste evento."})]}),(0,s.jsxs)("footer",{className:"bg-[#0F0F1B] text-white text-center py-8 absolute bottom-0 w-full",children:[(0,s.jsx)("div",{className:"text-xl mb-2",children:"\uD83C\uDF77 EnoLink"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Conectando apreciadores de vinho atrav\xe9s de experi\xeancias aut\xeanticas de degusta\xe7\xe3o"}),(0,s.jsx)("button",{className:"bg-red-800 px-6 py-2 rounded hover:opacity-90 text-sm",children:"\uD83D\uDCF1 Baixar App"})]})]}):(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center text-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Ops! Algo deu errado"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"ID do evento n\xe3o encontrado"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-800 text-white px-6 py-2 rounded hover:opacity-90",children:"Tentar novamente"})]})})}}}]);