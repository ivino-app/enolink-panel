"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{350:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(5155),l=t(2115),n=t(5695),i=t(5317);let r=(0,t(3915).Wp)({apiKey:"AIzaSyDtYR9RCS8kiUp1pUOWMuxHKGBF701Yriw",authDomain:"ivino-app.firebaseapp.com",projectId:"ivino-app",storageBucket:"ivino-app.firebasestorage.app",messagingSenderId:"27430021409",appId:"1:27430021409:web:5dd494dff3faa3cce87660",measurementId:"G-14N8SXXVMC"}),c=(0,i.aU)(r);var o=t(9911);function d(){let e=(0,n.useParams)(),a=(0,n.useSearchParams)(),t=(null==e?void 0:e.eventId)||(null==a?void 0:a.get("eventId"))||(null==a?void 0:a.get("id"))||"",{ranking:r,loading:d}=function(e){let[a,t]=(0,l.useState)(),[s,n]=(0,l.useState)(!0),r=(0,l.useCallback)(async()=>{if(e){n(!0);try{let a=(0,i.P)((0,i.rJ)(c,"wineRankings"),(0,i._M)("eventId","==",e)),s=(await (0,i.GG)(a)).docs.map(e=>({id:e.id,...e.data()}));console.log(JSON.stringify(s),"DATA DATA DATA"),t(s)}catch(e){console.error("Erro ao buscar ranking:",e)}n(!1)}},[e]);return(0,l.useEffect)(()=>{r()},[e,r]),{ranking:a,loading:s,getRanking:r}}(t);console.log(r,"event  id");let{eventData:x,loading:m}=function(e){let[a,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{e&&(async()=>{n(!0);try{let a=(0,i.H9)(c,"events",e),s=await (0,i.x7)(a);s.exists()&&t(s.data())}catch(e){console.error("Erro ao buscar evento:",e)}n(!1)})()},[e]),{eventData:a,loading:s}}(t),[h,u]=(0,l.useState)(null),[g,v]=(0,l.useState)({totalWines:0,totalParticipants:0,averageRating:0});(0,l.useEffect)(()=>{if((null==r?void 0:r.length)===0)return void v({totalWines:0,totalParticipants:0,averageRating:0});try{let e=null==r?void 0:r.length,a=(null==r?void 0:r.reduce((e,a)=>e+(a.totalRatings||0),0))||0,t=a>0?(null==r?void 0:r.reduce((e,a)=>e+(a.rating||0)*(a.totalRatings||0),0))/a:0;v({totalWines:e,totalParticipants:a,averageRating:t})}catch(e){u(e),console.error("Erro ao calcular estat\xedsticas:",e)}},[0]);let p=e=>{let{rating:a}=e,t=Math.floor(a),l=a%1>=.5;return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[[...Array(t)].map((e,a)=>(0,s.jsx)(o.gt3,{className:"text-yellow-400"},"full-".concat(a))),l&&(0,s.jsx)(o.gVl,{className:"text-yellow-400"},"half"),[...Array(5-t-!!l)].map((e,a)=>(0,s.jsx)(o.wei,{className:"text-gray-300"},"empty-".concat(a))),(0,s.jsx)("span",{className:"ml-1 text-black font-medium",children:a.toFixed(1)})]})},j=(r||[]).slice(0,3),N=(r||[]).slice(3);return d&&m?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600 text-xl",children:"Carregando ranking..."})}):t?(0,s.jsxs)("main",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 w-full z-50 bg-[#0F0F1B] text-white p-4 flex justify-between items-center shadow-md",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"EnoLink"}),(0,s.jsxs)("div",{className:"text-sm text-right",children:[(0,s.jsx)("div",{className:"font-semibold",children:(null==x?void 0:x.name)||"Carregando..."}),(0,s.jsx)("div",{className:"text-gray-300",children:(null==x?void 0:x.location)||""})]}),(0,s.jsx)("button",{className:"bg-red-800 px-4 py-2 rounded text-sm hover:opacity-80",children:"Compartilhar"})]}),(0,s.jsx)("div",{className:"h-20"}),(0,s.jsxs)("section",{className:"text-center py-8 px-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Ranking Final"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os melhores vinhos avaliados pelos participantes do evento"})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-10 text-center mb-10 text-xl font-medium",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:g.totalWines}),(0,s.jsx)("br",{}),"Vinhos Avaliados"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:g.totalParticipants}),(0,s.jsx)("br",{}),"Total de Avalia\xe7\xf5es"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:g.averageRating.toFixed(1)}),(0,s.jsx)("br",{}),"Nota M\xe9dia"]})]}),(null==j?void 0:j.length)>0&&(0,s.jsx)("div",{className:"overflow-y-auto",children:(0,s.jsxs)("ul",{class:"space-y-2",children:[(null==j?void 0:j.length)>0&&(0,s.jsx)("section",{className:"flex justify-center gap-8 mb-12 px-4 flex-wrap",children:j.map((e,a)=>(0,s.jsxs)("div",{className:"text-center p-4 rounded-xl shadow-lg w-60 ".concat(0===a?"border-2 border-red-800":""),children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:0===a?(0,s.jsx)(o.Hu1,{className:"text-red-800 mx-auto"}):1===a?(0,s.jsx)(o.tz0,{className:"text-gray-400 mx-auto"}):(0,s.jsx)(o.tz0,{className:"text-orange-300 mx-auto"})}),e.image&&(0,s.jsx)("div",{className:"w-16 h-24 mx-auto mb-2 relative",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsx)("div",{className:"flex justify-center gap-1 my-2 text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((a,t)=>(0,s.jsx)(p,{rating:e.rating||0}))}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[e.totalEvaluations||0," avalia\xe7",e.totalEvaluations>1?"\xf5es":"\xe3o"]}),(0,s.jsxs)("div",{className:"mt-2 text-white font-bold rounded-full px-4 py-1 w-fit mx-auto ".concat(0===a?"bg-red-800":1===a?"bg-gray-400":"bg-orange-300"),children:["#",a+1]})]},e.id))}),(null==N?void 0:N.length)>0&&(0,s.jsxs)("section",{className:"px-4 max-w-3xl mx-auto mb-16",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ranking Completo"}),N.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg mb-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[e.image&&(0,s.jsx)("div",{className:"w-12 h-16 flex-shrink-0",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold",children:["#",a+4," ",e.name]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.totalRatings||0," avalia\xe7\xe3o",1!==e.totalRatings?"\xf5es":""]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-400",children:[[void 0,void 0,void 0,void 0,void 0].map((a,t)=>(0,s.jsx)(o.gt3,{className:t<Math.round(e.rating||0)?"":"text-gray-300"},t)),(0,s.jsx)("span",{className:"ml-2 text-black font-medium",children:(e.rating||0).toFixed(1)})]})]},e.id))]})]})}),(null==r?void 0:r.length)==0&&(0,s.jsxs)("section",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF77"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Ainda n\xe3o h\xe1 avalia\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os participantes ainda n\xe3o avaliaram os vinhos deste evento."})]}),(0,s.jsxs)("footer",{className:"bg-[#0F0F1B] text-white text-center py-8 absolute bottom-0 w-full",children:[(0,s.jsx)("div",{className:"text-xl mb-2",children:"\uD83C\uDF77 EnoLink"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Conectando apreciadores de vinho atrav\xe9s de experi\xeancias aut\xeanticas de degusta\xe7\xe3o"}),(0,s.jsx)("button",{className:"bg-red-800 px-6 py-2 rounded hover:opacity-90 text-sm",children:"\uD83D\uDCF1 Baixar App"})]})]}):(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center text-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Ops! Algo deu errado"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"ID do evento n\xe3o encontrado"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-800 text-white px-6 py-2 rounded hover:opacity-90",children:"Tentar novamente"})]})})}}}]);