(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{350:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(5155),n=a(2115),i=a(5695),l=a(9911),r=a(5317);let c=(0,a(3915).Wp)({apiKey:"AIzaSyDtYR9RCS8kiUp1pUOWMuxHKGBF701Yriw",authDomain:"ivino-app.firebaseapp.com",projectId:"ivino-app",storageBucket:"ivino-app.firebasestorage.app",messagingSenderId:"27430021409",appId:"1:27430021409:web:5dd494dff3faa3cce87660",measurementId:"G-14N8SXXVMC"}),d=(0,r.aU)(c);function o(){let e=(0,i.useParams)(),t=(0,i.useSearchParams)(),a=(null==e?void 0:e.eventId)||(null==t?void 0:t.get("eventId"))||(null==t?void 0:t.get("id"))||"",{ranking:c,loading:o}=function(e){let[t,a]=(0,n.useState)(),[s,i]=(0,n.useState)(!0),l=async()=>{if(e){i(!0);try{let t=(0,r.P)((0,r.rJ)(d,"wineRankings"),(0,r._M)("eventId","==",e),(0,r.My)("rating","desc")),s=(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));a(s)}catch(e){console.error("Erro ao buscar ranking:",e)}i(!1)}};return(0,n.useEffect)(()=>{l()},[e,l]),{ranking:t,loading:s,getRanking:l}}(a),{eventData:x,loading:m}=function(e){let[t,a]=(0,n.useState)(null),[s,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{e&&(async()=>{i(!0);try{let t=(0,r.H9)(d,"events",e),s=await (0,r.x7)(t);s.exists()&&a(s.data())}catch(e){console.error("Erro ao buscar evento:",e)}i(!1)})()},[e]),{eventData:t,loading:s}}(a),[h,g]=(0,n.useState)({totalWines:0,totalParticipants:0,averageRating:0});(0,n.useEffect)(()=>{if(0===c.length)return void g({totalWines:0,totalParticipants:0,averageRating:0});let e=c.length,t=c.reduce((e,t)=>e+(t.totalRatings||0),0),a=t>0?c.reduce((e,t)=>e+(t.rating||0)*(t.totalRatings||0),0)/t:0;g({totalWines:e,totalParticipants:t,averageRating:a})},[c]);let u=c.slice(0,3),p=c.slice(3);return o||m?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600 text-xl",children:"Carregando ranking..."})}):a?(0,s.jsxs)("main",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 w-full z-50 bg-[#0F0F1B] text-white p-4 flex justify-between items-center shadow-md",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"EnoLink"}),(0,s.jsxs)("div",{className:"text-sm text-right",children:[(0,s.jsx)("div",{className:"font-semibold",children:(null==x?void 0:x.name)||"Carregando..."}),(0,s.jsx)("div",{className:"text-gray-300",children:(null==x?void 0:x.location)||""})]}),(0,s.jsx)("button",{className:"bg-red-800 px-4 py-2 rounded text-sm hover:opacity-80",children:"Compartilhar"})]}),(0,s.jsx)("div",{className:"h-20"}),(0,s.jsxs)("section",{className:"text-center py-8 px-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Ranking Final"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os melhores vinhos avaliados pelos participantes do evento"})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-10 text-center mb-10 text-xl font-medium",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:h.totalWines}),(0,s.jsx)("br",{}),"Vinhos Avaliados"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:h.totalParticipants}),(0,s.jsx)("br",{}),"Total de Avalia\xe7\xf5es"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-800 text-3xl",children:h.averageRating.toFixed(1)}),(0,s.jsx)("br",{}),"Nota M\xe9dia"]})]}),u.length>0&&(0,s.jsx)("section",{className:"flex justify-center gap-8 mb-12 px-4 flex-wrap",children:u.map((e,t)=>(0,s.jsxs)("div",{className:"text-center p-4 rounded-xl shadow-lg w-60 ".concat(0===t?"border-2 border-red-800":""),children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:0===t?(0,s.jsx)(l.Hu1,{className:"text-red-800 mx-auto"}):1===t?(0,s.jsx)(l.tz0,{className:"text-gray-400 mx-auto"}):(0,s.jsx)(l.tz0,{className:"text-orange-300 mx-auto"})}),e.image&&(0,s.jsx)("div",{className:"w-16 h-24 mx-auto mb-2 relative",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsx)("div",{className:"flex justify-center gap-1 my-2 text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((t,a)=>(0,s.jsx)(l.gt3,{className:a<Math.round(e.rating||0)?"":"text-gray-300"},a))}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[e.totalRatings||0," avalia\xe7\xe3o",1!==e.totalRatings?"\xf5es":""]}),(0,s.jsxs)("div",{className:"mt-2 text-white font-bold rounded-full px-4 py-1 w-fit mx-auto ".concat(0===t?"bg-red-800":1===t?"bg-gray-400":"bg-orange-300"),children:["#",t+1]})]},e.id))}),p.length>0&&(0,s.jsxs)("section",{className:"px-4 max-w-3xl mx-auto mb-16",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ranking Completo"}),p.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg mb-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[e.image&&(0,s.jsx)("div",{className:"w-12 h-16 flex-shrink-0",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",onError:e=>e.currentTarget.style.display="none"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold",children:["#",t+4," ",e.name]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.country||e.region}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.totalRatings||0," avalia\xe7\xe3o",1!==e.totalRatings?"\xf5es":""]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-400",children:[[void 0,void 0,void 0,void 0,void 0].map((t,a)=>(0,s.jsx)(l.gt3,{className:a<Math.round(e.rating||0)?"":"text-gray-300"},a)),(0,s.jsx)("span",{className:"ml-2 text-black font-medium",children:(e.rating||0).toFixed(1)})]})]},e.id))]}),0===c.length&&!o&&(0,s.jsxs)("section",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF77"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Ainda n\xe3o h\xe1 avalia\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Os participantes ainda n\xe3o avaliaram os vinhos deste evento."})]}),(0,s.jsxs)("footer",{className:"bg-[#0F0F1B] text-white text-center py-8",children:[(0,s.jsx)("div",{className:"text-xl mb-2",children:"\uD83C\uDF77 EnoLink"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Conectando apreciadores de vinho atrav\xe9s de experi\xeancias aut\xeanticas de degusta\xe7\xe3o"}),(0,s.jsx)("button",{className:"bg-red-800 px-6 py-2 rounded hover:opacity-90 text-sm",children:"\uD83D\uDCF1 Baixar App"})]})]}):(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center text-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Ops! Algo deu errado"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"ID do evento n\xe3o encontrado"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-800 text-white px-6 py-2 rounded hover:opacity-90",children:"Tentar novamente"})]})})}},717:(e,t,a)=>{Promise.resolve().then(a.bind(a,7850))},7850:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),n=a(2115),i=a(350);function l(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("p",{children:"Carregando..."}),children:(0,s.jsx)(i.A,{})})}}},e=>{e.O(0,[711,135,224,441,964,358],()=>e(e.s=717)),_N_E=e.O()}]);